/*! iFrame Resizer (iframeSizer.contentWindow.min.js) - v2.8.10 - 2015-06-21
 *  Desc: Include this file in any page being loaded into an iframe
 *        to force the iframe to resize to the content size.
 *  Requires: iframeResizer.min.js on host page.
 *  Copyright: (c) 2015 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */

!function(){"use strict";function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(a){return $+"["+ab+"] "+a}function c(a){Z&&"object"==typeof window.console&&console.log(b(a))}function d(a){"object"==typeof window.console&&console.warn(b(a))}function e(){f(),g(),c("Initialising iFrame ("+location.href+")"),j(),i("background",K),i("padding",N),r(),o(),p(),k(),t(),q(),X=s(),C("init","Init message from host page")}function f(){function a(a){return"true"===a?!0:!1}var b=W.substr(_).split(":");c("Reading data from parent"),ab=b[0],L=void 0!==b[1]?Number(b[1]):L,O=void 0!==b[2]?a(b[2]):O,Z=void 0!==b[3]?a(b[3]):Z,Y=void 0!==b[4]?Number(b[4]):Y,I=void 0!==b[6]?a(b[6]):I,M=b[7],U=void 0!==b[8]?b[8]:U,K=b[9],N=b[10],fb=void 0!==b[11]?Number(b[11]):fb,X.enable=void 0!==b[12]?a(b[12]):!1,cb=void 0!==b[13]?b[13]:cb,kb=void 0!==b[14]?b[14]:kb}function g(){function a(){var a=window.iFrameResizer;c("Reading data from page: "+JSON.stringify(a)),lb=void 0!==a.messageCallback?a.messageCallback:lb,db=void 0!==a.targetOrigin?a.targetOrigin:db,U=void 0!==a.heightCalculationMethod?a.heightCalculationMethod:U,kb=void 0!==a.widthCalculationMethod?a.widthCalculationMethod:kb}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&a()}function h(a,b){return-1!==b.indexOf("-")&&(d("Negative CSS value ignored for "+a),b=""),b}function i(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,c("Body "+a+' set to "'+b+'"'))}function j(){void 0===M&&(M=L+"px"),h("margin",M),i("margin",M)}function k(){document.documentElement.style.height="",document.body.style.height="",c('HTML & body height set to "auto"')}function l(b){function d(c){function d(){C(b.eventName,b.eventType)}a(window,c,d)}b.eventNames&&Array.prototype.map?(b.eventName=b.eventNames[0],b.eventNames.map(d)):d(b.eventName),c("Added event listener: "+b.eventType)}function m(){l({eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),l({eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),l({eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),l({eventType:"Orientation Change",eventName:"orientationchange"}),l({eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),l({eventType:"Window Clicked",eventName:"click"}),"child"===cb&&l({eventType:"IFrame Resized",eventName:"resize"})}function n(a,b,e,f){b!==a&&(a in e||(d(a+" is not a valid option for "+f+"CalculationMethod."),a=b),c(f+' calculation method set to "'+a+'"'))}function o(){n(U,T,mb,"height")}function p(){n(kb,jb,nb,"width")}function q(){!0===I?(m(),w()):c("Auto Resize disabled")}function r(){var a=document.createElement("div");a.style.clear="both",a.style.display="block",document.body.appendChild(a)}function s(){function b(){return{x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}}function e(a){var c=a.getBoundingClientRect(),d=b();return{x:parseInt(c.left,10)+parseInt(d.x,10),y:parseInt(c.top,10)+parseInt(d.y,10)}}function f(a){function b(a){var b=e(a);c("Moving to in page link (#"+d+") at x: "+b.x+" y: "+b.y),G(b.y,b.x,"scrollToOffset")}var d=a.split("#")[1]||a,f=decodeURIComponent(d),g=document.getElementById(f)||document.getElementsByName(f)[0];g?b(g):(c("In page link (#"+d+") not found in iFrame, so sending to parent"),G(0,0,"inPageLink","#"+d))}function g(){""!==location.hash&&"#"!==location.hash&&f(location.href)}function h(){function b(b){function c(a){a.preventDefault(),f(this.getAttribute("href"))}"#"!==b.getAttribute("href")&&a(b,"click",c)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),b)}function i(){a(window,"hashchange",g)}function j(){setTimeout(g,Q)}function k(){Array.prototype.forEach&&document.querySelectorAll?(c("Setting up location.hash handlers"),h(),i(),j()):d("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return X.enable?k():c("In page linking not enabled"),{findTarget:f}}function t(){c("Enable public methods"),window.parentIFrame={close:function(){G(0,0,"close")},getId:function(){return ab},moveToAnchor:function(a){X.findTarget(a)},reset:function(){F("parentIFrame.reset")},scrollTo:function(a,b){G(b,a,"scrollTo")},scrollToOffset:function(a,b){G(b,a,"scrollToOffset")},sendMessage:function(a,b){G(0,0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){U=a,o()},setWidthCalculationMethod:function(a){kb=a,p()},setTargetOrigin:function(a){c("Set targetOrigin: "+a),db=a},size:function(a,b){var c=""+(a?a:"")+(b?","+b:"");D(),C("size","parentIFrame.size("+c+")",a,b)}}}function u(){0!==Y&&(c("setInterval: "+Y+"ms"),setInterval(function(){C("interval","setInterval: "+Y)},Math.abs(Y)))}function v(a){return void 0===a||0===a}function w(){function a(a){function b(a){var b=C.bind(null,"imageLoad","Image loaded",void 0,void 0);(v(a.height)||v(a.width))&&(c("Attach listerner to "+a.src),a.addEventListener("load",b,!1))}"attributes"===a.type&&"src"===a.attributeName?b(a.target):"childList"===a.type&&Array.prototype.forEach.call(a.target.querySelectorAll("img"),b)}function b(b){C("mutationObserver","mutationObserver: "+b[0].target+" "+b[0].type),a(b[0])}function e(){var a=document.querySelector("body"),d={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},e=new g(b);c("Enable MutationObserver"),e.observe(a,d)}var f=0>Y,g=window.MutationObserver||window.WebKitMutationObserver;g?f?u():e():(d("MutationObserver not supported in this browser!"),u())}function x(a){function b(a){var b=/^\d+(px)?$/i;if(b.test(a))return parseInt(a,J);var d=c.style.left,e=c.runtimeStyle.left;return c.runtimeStyle.left=c.currentStyle.left,c.style.left=a||0,a=c.style.pixelLeft,c.style.left=d,c.runtimeStyle.left=e,a}var c=document.body,d=0;return"defaultView"in document&&"getComputedStyle"in document.defaultView?(d=document.defaultView.getComputedStyle(c,null),d=null!==d?d[a]:0):d=b(c.currentStyle[a]),parseInt(d,J)}function y(a,b){for(var d=b.length,e=0,f=(new Date).getTime(),g=0;d>g;g++)b[g].getBoundingClientRect()[a]>e&&(e=b[g].getBoundingClientRect()[a]);return f=(new Date).getTime()-f,c("Parsed "+d+" HTML elements"),c("Element position calculated in "+f+"ms"),e}function z(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function A(a,b){function c(){return d("No tagged elements ("+b+") found on page"),S}var e=document.querySelectorAll("["+b+"]");return 0===e.length?c():y(a,e)}function B(){return document.querySelectorAll("body *")}function C(a,b,d,e){function f(){a in{reset:1,resetPage:1,init:1}||c("Trigger event: "+b)}function g(){S=n,ib=o,G(S,ib,a)}function h(){return gb&&a in P}function i(){function a(a,b){var c=Math.abs(a-b)<=fb;return!c}return n=void 0!==d?d:mb[U](),o=void 0!==e?e:nb[kb](),a(S,n)||O&&a(ib,o)}function j(){return!(a in{init:1,interval:1,size:1})}function k(){return U in bb||O&&kb in bb}function l(){c("No change in size detected")}function m(){j()&&k()?F(b):a in{interval:1}||(f(),l())}var n,o;h()?c("Trigger event cancelled: "+a):i()||"init"===a?(f(),D(),g()):m()}function D(){gb||(gb=!0,c("Trigger event lock on")),clearTimeout(hb),hb=setTimeout(function(){gb=!1,c("Trigger event lock off"),c("--")},Q)}function E(a){S=mb[U](),ib=nb[kb](),G(S,ib,a)}function F(a){var b=U;U=T,c("Reset trigger event: "+a),D(),E("reset"),U=b}function G(a,b,d,e,f){function g(){void 0===f?f=db:c("Message targetOrigin: "+f)}function h(){var g=a+":"+b,h=ab+":"+g+":"+d+(void 0!==e?":"+e:"");c("Sending message to host page ("+h+")"),eb.postMessage($+h,f)}g(),h()}function H(a){function b(){return $===(""+a.data).substr(0,_)}function f(){W=a.data,eb=a.source,e(),R=!1,setTimeout(function(){V=!1},Q)}function g(){V?c("Page reset ignored by init"):(c("Page size reset by host page"),E("resetPage"))}function h(){C("resizeParent","Parent window resized")}function i(){var a=k();X.findTarget(a)}function j(){return a.data.split("]")[1].split(":")[0]}function k(){return a.data.split(":")[1]}function l(){return"iFrameResize"in window}function m(){var a=k();c("MessageCallback called from parent: "+a),lb(JSON.parse(a)),c(" --")}function n(){return a.data.split(":")[2]in{"true":1,"false":1}}function o(){switch(j()){case"reset":g();break;case"resize":h();break;case"moveToAnchor":i();break;case"message":m();break;default:l()||n()||d("Unexpected message ("+a.data+")")}}function p(){!1===R?o():n()?f():c('Ignored message of type "'+j()+'". Received before initialization.')}b()&&p()}var I=!0,J=10,K="",L=0,M="",N="",O=!1,P={resize:1,click:1},Q=128,R=!0,S=1,T="bodyOffset",U=T,V=!0,W="",X={},Y=32,Z=!1,$="[iFrameSizer]",_=$.length,ab="",bb={max:1,min:1,bodyScroll:1,documentElementScroll:1},cb="child",db="*",eb=window.parent,fb=0,gb=!1,hb=null,ib=1,jb="max",kb=jb,lb=function(){d("MessageCallback function not defined")},mb={bodyOffset:function(){return document.body.offsetHeight+x("marginTop")+x("marginBottom")},offset:function(){return mb.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,z(mb))},min:function(){return Math.min.apply(null,z(mb))},grow:function(){return mb.max()},lowestElement:function(){return Math.max(mb.bodyOffset(),y("bottom",B()))},taggedElement:function(){return A("bottom","data-iframe-height")}},nb={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(nb.bodyScroll(),nb.documentElementScroll())},max:function(){return Math.max.apply(null,z(nb))},min:function(){return Math.min.apply(null,z(nb))},leftMostElement:function(){return y("left",B())},taggedElement:function(){return A("left","data-iframe-width")}};a(window,"message",H)}();
//# sourceMappingURL=iframeResizer.contentWindow.map