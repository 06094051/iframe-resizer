<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Iframe-resizer by davidjbradshaw</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Iframe-resizer</h1>
        <p class="header">jQuery pluggin for cross domain sizing iframes to content with support for window resizing.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/davidjbradshaw/iframe-resizer/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/davidjbradshaw/iframe-resizer/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/davidjbradshaw/iframe-resizer">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/davidjbradshaw">davidjbradshaw</a></p>


      </header>
      <section>
        <h1>
<a name="cross-domain-iframe-resize" class="anchor" href="#cross-domain-iframe-resize"><span class="octicon octicon-link"></span></a>Cross domain iFrame resize</h1>

<p>This is a simple library to enable the resizing of cross domain iFrames to fit the contained content. It uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage">postMessage</a> to pass messages between the host page and the iFrame and when available <a href="https://developer.mozilla.org/en/docs/Web/API/MutationObserver">MutationObserver</a> to detect DOM changes, with a fall back to setInterval for IE8-10. The code also detects resize events and provides functions to allow the iFrame to set a custom size.</p>

<p>The package contains two minified JavaScript files in the <a href="js">js</a> folder. The first (<a href="https://raw2.github.com/davidjbradshaw/iframe-resizer/master/js/jquery.iframeResizer.min.js">jquery.iframeResizer.min.js</a>) is a <strong>jQuery</strong> plugin for the page hosting the iFrame. </p>

<p>The second one (<a href="https://raw.github.com/davidjbradshaw/iframe-resizer/master/js/iframeResizer.contentWindow.min.js">iframeResizer.contentWindow.min.js</a>) is a <strong>native</strong> JavaScript file that needs placing in the page contained within your iFrame. <i>This file is designed to be a guest on someone else's system, so has no dependancies and won't do anything until it's activated by a message from the containing page</i>.</p>

<p>The code supports resizing the iFrame when the browser window changes size or the content of the iFrame changes. For this to work you need to set one of the dimensions to a percentage and tell the library only to update the other dimension. Normally you would set the width to 100% and have the height scale to fit the content.</p>

<p>To set the library up for this create a basic iFrame tag with the following options.</p>

<pre><code>&lt;iframe src="http://anotherdomain.com/frame.content.html" width="100%" scrolling="no"&gt;&lt;/iframe&gt;
</code></pre>

<p>Note that scrolling is set to 'no', as older versions of IE don't allow this to be turned off in code and can just slightly add a bit of extra space to the bottom of the content that it doesn't report when it returns the height.</p>

<p>Next we initialise the library on the page hosting our iFrame. This example shows all the default options and the values returned to the callback function.</p>

<div class="highlight highlight-js"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">'iframe'</span><span class="p">).</span><span class="nx">iFrameResize</span><span class="p">({</span>
    <span class="nx">log</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">autoResize</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">contentWindowBodyMargin</span><span class="o">:</span><span class="mi">8</span><span class="p">,</span>
    <span class="nx">doHeight</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nx">doWidth</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
    <span class="nx">enablePublicMethods</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
    <span class="nx">interval</span><span class="o">:</span><span class="mi">33</span><span class="p">,</span>
    <span class="nx">scrolling</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
    <span class="nx">callback</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">messageData</span><span class="p">){</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'p#callback'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s1">'&lt;b&gt;Frame ID:&lt;/b&gt; '</span> <span class="o">+</span> <span class="nx">messageData</span><span class="p">.</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> 
                            <span class="s1">' &lt;b&gt;Height:&lt;/b&gt; '</span> <span class="o">+</span> <span class="nx">messageData</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> 
                            <span class="s1">' &lt;b&gt;Width:&lt;/b&gt; '</span> <span class="o">+</span> <span class="nx">messageData</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span>
                            <span class="s1">' &lt;b&gt;Event type:&lt;/b&gt; '</span> <span class="o">+</span> <span class="nx">messageData</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>To see this working take a look at the <a href="http://davidjbradshaw.com/iframe-resizer/example/">example</a> and watch the console log.</p>

<h2>
<a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>Options</h2>

<h3>
<a name="log" class="anchor" href="#log"><span class="octicon octicon-link"></span></a>log</h3>

<pre><code>default: false
type: boolean
</code></pre>

<p>Setting the <code>log</code> option to true will make the scripts in both the host page and the iFrame output everything they do to the JavaScript console so you can see the communication between the two scripts.</p>

<h3>
<a name="autoresize" class="anchor" href="#autoresize"><span class="octicon octicon-link"></span></a>autoResize</h3>

<pre><code>default: true
type: boolean
</code></pre>

<p>When enabled changes to the Window size or the DOM will cause the iFrame to resize to the new content size. Disable it if using size method with custom dimensions.</p>

<h3>
<a name="contentwindowbodymagin" class="anchor" href="#contentwindowbodymagin"><span class="octicon octicon-link"></span></a>contentWindowBodyMagin</h3>

<pre><code>default: 8  (in px)
type: number
</code></pre>

<p>Setting is used to override the default browser body tag style. As we cannot reliably read this value and it's not included in the figure returned by <code>document.body.offsetHeight</code>. So the only way we can work this out is to set it, 8px is the default option in FireFox. However, you will most likely want to set this to zero so that the content of you iFrame is at the edge of the iFrame.</p>

<h3>
<a name="doheight" class="anchor" href="#doheight"><span class="octicon octicon-link"></span></a>doHeight</h3>

<pre><code>default: true
type: boolean
</code></pre>

<p>Calculate iFrame hosted content height.</p>

<h3>
<a name="dowidth" class="anchor" href="#dowidth"><span class="octicon octicon-link"></span></a>doWidth</h3>

<pre><code>default: false
type: boolean
</code></pre>

<p>Calculate iFrame hosted content width. Enable this if using size method to set a custom width.</p>

<h3>
<a name="enablepublicmethods" class="anchor" href="#enablepublicmethods"><span class="octicon octicon-link"></span></a>enablePublicMethods</h3>

<pre><code>default: false
type: boolean
</code></pre>

<p>If enabled library creates a <code>window.parentIFrame</code> object in the browser, with <code>size()</code> and <code>close()</code> methods.</p>

<h3>
<a name="interval" class="anchor" href="#interval"><span class="octicon octicon-link"></span></a>interval</h3>

<pre><code>default: 33  (in ms)
type: number
</code></pre>

<p>In browsers that don't support <a href="https://developer.mozilla.org/en/docs/Web/API/MutationObserver">mutationObserver</a>, such as IE10, the library falls back to using setInterval, to check for changes to the page size. Default values is equal to two frame refreshes at 60Hz, setting this to a higher value will make screen redraws noticeable to the user.</p>

<p>Set to zero to disable.</p>

<h3>
<a name="scrolling" class="anchor" href="#scrolling"><span class="octicon octicon-link"></span></a>scrolling</h3>

<pre><code>default: false
type: boolean
</code></pre>

<p>Enable scroll bars in iFrame.</p>

<h3>
<a name="callback" class="anchor" href="#callback"><span class="octicon octicon-link"></span></a>callback</h3>

<pre><code>type: function ({iframe,height,width,type})
</code></pre>

<p>Function called after iFrame resized. Passes in messageData object containing the iFrame, height, width and the type of event that triggered the iFrame to resize.</p>

<h2>
<a name="methods" class="anchor" href="#methods"><span class="octicon octicon-link"></span></a>Methods</h2>

<p>To enable these methods you must set <code>enablePublicMethods</code> to <code>true</code>. This creates a <code>window.parentIFrame</code> object in the iFrame.</p>

<h5>
<a name="windowparentiframeclose" class="anchor" href="#windowparentiframeclose"><span class="octicon octicon-link"></span></a>window.parentIFrame.close()</h5>

<p>Calling this function causes the parent page to remove the iFrame. This method should be contained in the following rapper, in case the page is not loaded inside an iFrame.</p>

<div class="highlight highlight-js"><pre><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">parentIFrame</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">parentIFrame</span><span class="p">.</span><span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">parentIFrame</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

<h5>
<a name="windowparentiframesize-customheight-customwidth" class="anchor" href="#windowparentiframesize-customheight-customwidth"><span class="octicon octicon-link"></span></a>window.parentIFrame.size ([customHeight<b>,</b> customWidth])</h5>

<p>Manually force iFrame to resize. Incase the page is loaded out side the iFrame, you must test before making this call.</p>

<pre><code>if (window.parentIFrame &amp;&amp; window.parentIFrame.size) {
    window.parentIFrame.size();
}
</code></pre>

<p>This method also accepts two arguments: <strong>customHeight</strong> &amp; <strong>customWidth</strong>. To use them you need first to disable the autoResize option to prevent auto resizing and enable the doWidth option if you wish to set the width.</p>

<div class="highlight highlight-js"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">'iframe'</span><span class="p">).</span><span class="nx">iFrameResize</span><span class="p">({</span>
    <span class="nx">autoResize</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">enablePublicMethods</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">doWidth</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span>
</pre></div>

<p>Then just call size method with dimensions:</p>

<div class="highlight highlight-js"><pre><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">parentIFrame</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">parentIFrame</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">parentIFrame</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> <span class="c1">// Set height to 100px</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="browser-compatibility" class="anchor" href="#browser-compatibility"><span class="octicon octicon-link"></span></a>Browser compatibility</h2>

<p>Works with all browsers which support <a href="http://caniuse.com/#feat=x-doc-messaging">window.postMessage</a> (IE8+).</p>

<h2>
<a name="bower" class="anchor" href="#bower"><span class="octicon octicon-link"></span></a>Bower</h2>

<p>This library can be install via the <a href="http://bower.io">Bower</a> front-end package management system.</p>

<pre><code>bower instal iframe-resizer
</code></pre>

<h2>
<a name="version-history" class="anchor" href="#version-history"><span class="octicon octicon-link"></span></a>Version History</h2>

<ul>
<li>v1.4.0 Option to enable scrolling in iFrame, off by default. Bower dependancies updated.</li>
<li>v1.3.7 Stop resize event firing for 50ms after size event. Added size(250) to example.</li>
<li>v1.3.6 Updated jQuery to v1.11.0 in example due to IE11 having issues with jQuery v1.10.1.</li>
<li>v1.3.5 Documentation improvements. Added Grunt-Bump to build script.</li>
<li>v1.3.0 IFrame code now uses default values if called with an old version of the host page script. Improved function naming. Old names have been deprecated and removed from docs, but remain in code for backwards compatabilty.</li>
<li>v1.2.5 Fix publish to <a href="https://plugins.jquery.com">plugins.jquery.com</a>.</li>
<li>v1.2.0 Added autoResize option, added height/width values to iFrame public size function, set HTML tag height to auto, improved documentation [All <a href="https://github.com/jmav">Jure Mav</a>]. Plus setInterval now only runs in browsers that don't support <a href="https://developer.mozilla.org/en/docs/Web/API/MutationObserver">MutationObserver</a> and is on by default, sourceMaps added and close() method introduced to window.parentIFrame object in iFrame. </li>
<li>v1.1.1 Added event type to messageData object.</li>
<li>v1.1.0 Added DOM <a href="https://developer.mozilla.org/en/docs/Web/API/MutationObserver">MutationObserver</a> trigger to better detect content changes in iFrame, <a href="https://github.com/davidjbradshaw/iframe-resizer/issues/7">#7</a> Set height of iFrame body element to auto to prevent resizing loop, if it's set to a percentage.</li>
<li>v1.0.3 <a href="https://github.com/davidjbradshaw/iframe-resizer/issues/6">#6</a> Force incoming messages to string. Migrated to Grunt 4.x. Published to Bower.</li>
<li>v1.0.2 <a href="https://github.com/davidjbradshaw/iframe-resizer/issues/2">#2</a> mime-type changed for IE8-10.</li>
<li>v1.0.0 Initial published release.</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright © 2013-14 <a href="https://github.com/davidjbradshaw">David J. Bradshaw</a>
Licensed under the MIT license.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47552253-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
